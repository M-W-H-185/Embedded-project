A51 MACRO ASSEMBLER  OS_MCU                                                               01/02/2024 16:55:54 PAGE     1


MACRO ASSEMBLER A51 V8.2.7.0
OBJECT MODULE PLACED IN .\Objects\os_mcu.obj
ASSEMBLER INVOKED BY: C:\Keil_v5\C51\BIN\A51.EXE XmRTOS\os_mcu.asm SET(SMALL) DEBUG PRINT(.\Listings\os_mcu.lst) OBJECT(
                      .\Objects\os_mcu.obj) EP

LOC  OBJ            LINE     SOURCE

                       1     NAME    OS_CPU_A_ASM    ; ¶¨ÒåÒ»¸öÃû³ÆÎª ¡°OS_CPU_A_ASM¡±»ã±à¶Î
                       2     
                       3     ?PR?OSTickISR?OS_CPU_A_ASM      SEGMENT CODE    ; Õâ¾äÓ¦¸ÃÊÇ ÔÚ OS_CPU_A_ASM¶ËÀïÃæÓÐÒ»¸öOST
                             ickISRº¯Ê£¬·ÅÔÚÁËcodeÇøÓò
                       4     
                       5     EXTRN CODE  (_?time0_handle)
                       6     
                       7     
                       8     
                       9     ;PUBLIC OSCtxSw                 ; ÕâÀï¾ÍÊÇ½«Õâ¸öOSCtxSwº¯Ê¹«¿ª³öÈ¥
                      10     
                      11     
                      12     ;¶¨ÒåÑ¹Õ»ºê
                      13     PUSHALL         MACRO  
                      14             USING 0     ;¹¤×÷¼Ä´æÆ÷0  AR0~AR7 ¶ÔÓ¦00~07HµØÖ·
                      15             PUSH PSW
                      16             PUSH ACC
                      17             PUSH B
                      18             PUSH DPL
                      19             PUSH DPH
                      20                     PUSH 0x00
                      21                     PUSH 0x01
                      22                     PUSH 0x02
                      23                     PUSH 0x03
                      24                     PUSH 0x04
                      25                     PUSH 0x05
                      26                     PUSH 0x06
                      27                     PUSH 0x07
                      28     ENDM
                      29     
                      30     ;¶¨Òå³öÕ»ºê
                      31     POPALL MACRO   
                      32             USING 0     ;¹¤×÷¼Ä´æÆ÷0  AR0~AR7 ¶ÔÓ¦00~07HµØÖ·
                      33             POP 0x07
                      34             POP 0x06
                      35             POP 0x05
                      36             POP 0x04
                      37             POP 0x03
                      38             POP 0x02
                      39             POP 0x01
                      40             POP 0x00
                      41             POP DPH
                      42             POP DPL
                      43             POP B
                      44             POP ACC
                      45             POP PSW
                      46     ENDM
                      47     
                      48     
                      49     
                      50     
                      51     
                      52     
                      53     
                      54     
                      55     
                      56     
A51 MACRO ASSEMBLER  OS_MCU                                                               01/02/2024 16:55:54 PAGE     2

                      57     ; ---------------- ¶¨Ê±Æ÷0 Ïà¹Øµ÷ÓÃ ----------------
                      58     ; --- ¶¨Ê±Æ÷0 ÖÐ¶Ï·þÎñ³ÌÐò ---
----                  59     RSEG  ?PR?OSTickISR?OS_CPU_A_ASM
0000                  60     OSTickISR:     
0000 C2AF             61             CLR EA          ; ¹ØÖÐ¶Ï
                      62             PUSHALL         ; Ñ¹Õ»
                      77             
001C 120000   F       78             LCALL _?time0_handle    ; µ÷ÓÃÖÐ¶Ï´¦Àíº¯Ê
                      79             
                      80             POPALL          ; ³öÕ»
0039 D2AF             95             SETB EA         ; ¿ªÖÐ¶Ï
                      96             
003B 32               97     RETI
                      98     ; --- ¶¨Ê±Æ÷0 ÖÐ¶Ï·þÎñ³ÌÐò ---
                      99     
                     100     
----                 101     CSEG AT 000BH   ;¶¨Ê±Æ÷T0ÖÐ¶Ï
000B 020000   F      102      LJMP OSTickISR
                     103     
                     104     ; ---------------- ¶¨Ê±Æ÷0 Ïà¹Øµ÷ÓÃ ----------------
                     105     
                     106     END
                                     
                                     
                                     
                                     
                                     
                             ;       ;-- Ê×éµÄÆðÊ¼µØÖ·¾ÍÊÇÖ¸ÏòµÚÒ»¸öË÷ÒµÄµÚÒ»¸ö½á¹¹ÌåÏÂµÄ±äÁ¿
                             ;    MOV R0, #tcb_list ; ½«ÈÎÎñ¿ØÖÆ¿éÊ×éµÄÆðÊ¼µØÖ·¼ÓÔØµ½ R0
                             ;       MOV @R0, #0x44  ; tcb_list[0].sp = 0x44;
                             ;       MOV R0,#tcb_list+1;     sp ÊÇuint8_t ËùÒÔÊÇÆ«ÒÆÁ¿+1Ìøµ½ÏÂÒ»¸ötcb_list[0].delay_tick
                              = 0x00000066
                             ;       MOV @R0,#0x00000066;    
                             ;       MOV R0,#tcb_list+1+4;   delay_tick ÊÇuint32_t ËùÒÔÊÇÆ«ÒÆÁ¿+4Ìøµ½ÏÂÒ»¸ötcb_list[0].o
                             s_status_type = 0x77;
                             ;       MOV @R0,#0x77;  
                             ;       MOV R0,#tcb_list+1+4+1; os_status_type ÊÇuint8_t ËùÒÔÊÇÆ«ÒÆÁ¿+1Ìøµ½ÏÂÒ»¸ötcb_list[0
                             ].test_value = 0x88;
                             ;       MOV @R0,#0x88;
A51 MACRO ASSEMBLER  OS_MCU                                                               01/02/2024 16:55:54 PAGE     3

SYMBOL TABLE LISTING
------ ----- -------


N A M E                     T Y P E  V A L U E   ATTRIBUTES

?PR?OSTICKISR?OS_CPU_A_ASM  C SEG    003CH       REL=UNIT
ACC. . . . . . . . . . . .  D ADDR   00E0H   A   
B. . . . . . . . . . . . .  D ADDR   00F0H   A   
DPH. . . . . . . . . . . .  D ADDR   0083H   A   
DPL. . . . . . . . . . . .  D ADDR   0082H   A   
EA . . . . . . . . . . . .  B ADDR   00A8H.7 A   
OSTICKISR. . . . . . . . .  C ADDR   0000H   R   SEG=?PR?OSTICKISR?OS_CPU_A_ASM
OS_CPU_A_ASM . . . . . . .  N NUMB   -----       
PSW. . . . . . . . . . . .  D ADDR   00D0H   A   
_?TIME0_HANDLE . . . . . .  C ADDR   -----       EXT


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
